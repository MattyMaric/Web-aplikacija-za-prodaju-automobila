<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Create Vozilo</title>
</head>

<body>
    <div class="container mt-5">
        <h2>Create New Vozilo</h2>
        <form method="post" action="/create_vozilo" enctype="multipart/form-data">
            <!-- Marka Dropdown -->
            <div class="mb-3">
                <label for="marka" class="form-label">Marka</label>
                <select id="marka" name="marka" class="form-select" required>
                    <option value="">Select Marka</option>
                    {% for marka in marke %}
                    <option value="{{ marka.id }}">{{ marka.ime }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Model Dropdown -->
            <div class="mb-3">
                <label for="model" class="form-label">Model</label>
                <select id="model" name="model_id" class="form-select" required>
                    <option value="">Odaberite model</option>
                </select>
            </div>

            <!-- Other fields for Vozilo creation -->
            <div class="mb-3">
                <label for="ime" class="form-label">Ime</label>
                <input type="text" id="ime" name="ime" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="godina" class="form-label">Godina</label>
                <input type="number" id="godina" name="godina" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="kilometraza" class="form-label">Kilometraža</label>
                <input type="number" id="kilometraza" name="kilometraza" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="cijena" class="form-label">Cijena</label>
                <input type="number" step="0.01" id="cijena" name="cijena" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="slika" class="form-label">Učitajte sliku:</label>
                <input type="file" id="slika" name="slika" class="form-control" accept="image/*" required>
            </div>

            <!-- Opis field -->
            <div class="mb-3">
                <label for="opis" class="form-label">Opis</label>
                <textarea id="opis" name="opis" class="form-control" rows="3"></textarea>
            </div>

            <!-- Boolean fields (Yes/No) -->
            <div class="container">
                <h3>Specifikacije Vozila</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="abs" name="abs">
                            <label class="form-check-label" for="abs">ABS</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="esp" name="esp">
                            <label class="form-check-label" for="esp">ESP</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="airbags" name="airbags">
                            <label class="form-check-label" for="airbags">Airbags</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="central_lock" name="central_lock">
                            <label class="form-check-label" for="central_lock">Central Lock</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="power_windows" name="power_windows">
                            <label class="form-check-label" for="power_windows">Power Windows</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="sunroof" name="sunroof">
                            <label class="form-check-label" for="sunroof">Sunroof</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="navigation" name="navigation">
                            <label class="form-check-label" for="navigation">Navigacija</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="parking_sensors" name="parking_sensors">
                            <label class="form-check-label" for="parking_sensors">Parking Senzori</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="backup_camera" name="backup_camera">
                            <label class="form-check-label" for="backup_camera">Zadnja kamera</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="heated_seats" name="heated_seats">
                            <label class="form-check-label" for="heated_seats">Grijanje sjedišta</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="xenon_lights" name="xenon_lights">
                            <label class="form-check-label" for="xenon_lights">Xenonska Svjetla</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="leather_seats" name="leather_seats">
                            <label class="form-check-label" for="leather_seats">Kožna Sjedala</label>
                        </div>
                    </div>
                </div>
            
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="bluetooth" name="bluetooth">
                            <label class="form-check-label" for="bluetooth">Bluetooth</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="cruise_control" name="cruise_control">
                            <label class="form-check-label" for="cruise_control">Tempomat</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="automatic_climate_control" name="automatic_climate_control">
                            <label class="form-check-label" for="automatic_climate_control">Automatska Klimatizacija</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="infotainment_system" name="infotainment_system">
                            <label class="form-check-label" for="infotainment_system">Infotainment Sustav</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="keyless_entry" name="keyless_entry">
                            <label class="form-check-label" for="keyless_entry">Bežični Ulaz</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="start_stop_system" name="start_stop_system">
                            <label class="form-check-label" for="start_stop_system">Start-Stop Sustav</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="panoramic_roof" name="panoramic_roof">
                            <label class="form-check-label" for="panoramic_roof">Panoramski Krov</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="lane_assist" name="lane_assist">
                            <label class="form-check-label" for="lane_assist">Lane assist</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="blind_spot_monitor" name="blind_spot_monitor">
                            <label class="form-check-label" for="blind_spot_monitor">Monitor Mrtvog Ugla</label>
                        </div>
                    </div>
                </div>
            </div>
            


            <!-- String/Integer fields -->
            <div class="mb-3">
                <label for="tire_size" class="form-label">Veličina guma</label>
                <input type="text" id="tire_size" name="tire_size" class="form-control">
            </div>
            <div class="mb-3">
                <label for="car_color" class="form-label">Boja vozila</label>
                <input type="text" id="car_color" name="car_color" class="form-control">
            </div>
            <div class="mb-3">
                <label for="fuel_type" class="form-label">Vrsta goriva</label>
                <input type="text" id="fuel_type" name="fuel_type" class="form-control" placeholder="Petrol, Diesel, Electric, etc.">
            </div>
            <div class="mb-3">
                <label for="transmission_type" class="form-label">Vrsta mjenjača</label>
                <input type="text" id="transmission_type" name="transmission_type" class="form-control" placeholder="Manual, Automatic, etc.">
            </div>
            <div class="mb-3">
                <label for="drive_type" class="form-label">Tip vuče</label>
                <input type="text" id="drive_type" name="drive_type" class="form-control" placeholder="FWD, RWD, AWD">
            </div>
            <div class="mb-3">
                <label for="number_of_doors" class="form-label">Broj vrata</label>
                <input type="number" id="number_of_doors" name="number_of_doors" class="form-control" value="4">
            </div>
            <div class="mb-3">
                <label for="number_of_seats" class="form-label">Broj sjedišta</label>
                <input type="number" id="number_of_seats" name="number_of_seats" class="form-control" value="5">
            </div>
            <div class="mb-3">
                <label for="engine_size" class="form-label">Veličina motora (litri)</label>
                <input type="number" step="0.1" id="engine_size" name="engine_size" class="form-control">
            </div>
            <div class="mb-3">
                <label for="horsepower" class="form-label">Konjska snaga</label>
                <input type="number" id="horsepower" name="horsepower" class="form-control">
            </div>
            <div class="mb-3">
                <label for="torque" class="form-label">Obrtna sila (Nm)</label>
                <input type="number" id="torque" name="torque" class="form-control">
            </div>
            <div class="mb-3">
                <label for="co2_emissions" class="form-label">CO2 Emisije (g/km)</label>
                <input type="number" step="0.1" id="co2_emissions" name="co2_emissions" class="form-control">
            </div>
            <div class="mb-3">
                <label for="fuel_consumption_city" class="form-label">Potrošnja Goriva (L/100km - Grad)</label>
                <input type="number" step="0.1" id="fuel_consumption_city" name="fuel_consumption_city" class="form-control">
            </div>
            
            <div class="mb-3">
                <label for="fuel_consumption_highway" class="form-label">Potrošnja Goriva (L/100km - Autocesta)</label>
                <input type="number" step="0.1" id="fuel_consumption_highway" name="fuel_consumption_highway" class="form-control">
            </div>
            
            <div class="mb-3">
                <label for="fuel_consumption_combined" class="form-label">Potrošnja Goriva (L/100km - Kombinirana)</label>
                <input type="number" step="0.1" id="fuel_consumption_combined" name="fuel_consumption_combined" class="form-control">
            </div>
            

            <button type="submit" class="btn btn-primary">Kreiraj vozilo</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.getElementById('marka').addEventListener('change', function () {
            const markaId = this.value;
            if (markaId) {
                fetch(`/models/${markaId}`)
                    .then(response => response.json())
                    .then(data => {
                        const modelSelect = document.getElementById('model');
                        modelSelect.innerHTML = '<option value="">Select Model</option>'; // Reset options
                        data.forEach(model => {
                            const option = document.createElement('option');
                            option.value = model.id;
                            option.textContent = model.naziv_modela;
                            modelSelect.appendChild(option);
                        });
                    })
                    .catch(error => console.error('Error fetching models:', error));
            } else {
                document.getElementById('model').innerHTML = '<option value="">Select Model</option>';
            }
        });

    </script>
</body>

</html>
